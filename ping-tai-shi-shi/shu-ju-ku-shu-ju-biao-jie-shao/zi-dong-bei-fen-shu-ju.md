---
description: >-
  可以实现自动进行数据和文件存储的备份，服务器进行配置后，系统将会按指定的时间周期对服务器中的数据以及文件进行备份，有效地避免服务器使用中的数据误操作带来的数据丢失。
---

# 自动执行数据备份与恢复

```text
 配置文件路径：o2server/config/node_127.0.0.1.json
```

{  
  ......

   **//数据库导出备份相关配置**  
   "dumpData":{                                             
     "cron" : "0 0 21 \* \* ?",                            //数据库导出备份执行的时间周期，Cron表达式  
     "size" : 14                                              //数据库导出备份文件保留的最大个数  
   },   **//文件导出备份相关配置**  
   "dumpStorage":{                                       
     "cron" : "0 0 21 \* \* ?",                            //文件存储导出备份执行的时间周期，Cron表达式  
     "size" : 14                                              //文件存储导出备份文件保留的最大个数  
   }  
 }

备份文件存放位置：o2server\local\backup

![](../../.gitbook/assets/image%20%28144%29.png)

配置说明：

1、参数cron：O2OA采用通用的CRON时间表达式来实现对任务执行周期 的设定。CRON表达式相关的说明，请参见：https://www.cnblogs.com/javahr/p/8318728.html

     常用的CRON表达式：     

| （1）0 0 2 1 \* ? \*   表示在每月的1日的凌晨2点调整任务  （2）0 15 10 ? \* MON-FRI   表示周一到周五每天上午10:15执行作业  （3）0 15 10 ? 6L 2002-2006   表示2002-2006年的每个月的最后一个星期五上午10:15执行作  （4）0 0 10,14,16 \* \* ?   每天上午10点，下午2点，4点   （5）0 0/30 9-17 \* \* ?   朝九晚五工作时间内每半小时   （6）0 0 12 ? \* WED    表示每个星期三中午12点   （7）0 0 12 \* \* ?   每天中午12点触发   （8）0 15 10 ? \* \*    每天上午10:15触发   （9）0 15 10 \* \* ?     每天上午10:15触发   （10）0 15 10 \* \* ? \*    每天上午10:15触发   （11）0 15 10 \* \* ? 2005    2005年的每天上午10:15触发   （12）0 \* 14 \* \* ?     在每天下午2点到下午2:59期间的每1分钟触发   （13）0 0/5 14 \* \* ?    在每天下午2点到下午2:55期间的每5分钟触发   （14）0 0/5 14,18 \* \* ?     在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发   （15）0 0-5 14 \* \* ?    在每天下午2点到下午2:05期间的每1分钟触发   （16）0 10,44 14 ? 3 WED    每年三月的星期三的下午2:10和2:44触发   （17）0 15 10 ? \* MON-FRI    周一至周五的上午10:15触发   （18）0 15 10 15 \* ?    每月15日上午10:15触发   （19）0 15 10 L \* ?    每月最后一日的上午10:15触发   （20）0 15 10 ? \* 6L    每月的最后一个星期五上午10:15触发   （21）0 15 10 ? \* 6L 2002-2005   2002年至2005年的每月的最后一个星期五上午10:15触发   （22）0 15 10 ? \* 6\#3   每月的第三个星期五上午10:15触发 |
| :--- |


**2、参数size：因为考虑到备份对磁盘容量的消夏，O2OA支持只保留指定数量的备份文件。超过size指定数量的备份文件时，最早的备份文件将会被删除。**

