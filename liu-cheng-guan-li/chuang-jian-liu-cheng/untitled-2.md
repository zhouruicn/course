# 修改路由

我们已经设置好了所有活动，如下图



![](../../.gitbook/assets/image%20%2863%29.png)



  
接下来要将这些活动通过路由将这些活动按流程要求连接起来，以确保流程将按照我们的需求进行流转。

首先，申请人处理后，要交由”部门领导审核”， 所以要修改“送办理”这条路由。点中“送办理”路由的箭头部分，按住鼠标左键不放，将鼠标移动到“部门领导审核”活动上，然后松开鼠标左键，这样，就将“送办理”这条路由的终点，修改为“部门领导审核”活动了。



![](../../.gitbook/assets/image%20%2826%29.png)

然后选中“送办理”路由（路由显示为橙色），在属性区，将名称改为“送部门领导审核”

![](../../.gitbook/assets/image%20%2875%29.png)

部门领导审核后将流转给财务部门复审，所以要创建一条从“部门领导审核”活动到“财务部门复审”的路由。鼠标双击“部门领导审核”活动，移动鼠标，会发现在流程编辑区域有一条起点为“部门领导审核”活动，没有终点的“未命名”路由，路由箭头跟随鼠标移动，颜色为红色。移动鼠标到“财务部门复审”活动，单击鼠标左键，路由箭头将指向“财务部门复审”活动，这样就创建了一条从“部门领导审核”活动到“财务部门复审”的路由

![](../../.gitbook/assets/image%20%28127%29.png)

![](../../.gitbook/assets/image%20%28122%29.png)

然后选中刚刚新建的路由，在属性区，将名称改为“送财务部门复审”。 财务部门复审后，有两个可能，一是总金额小于或等于5000的情况下，交由财务部门办理；二手总金额大于5000时需要公司领导审批。所以我们要建一条路由指向选择活动，命名为“财务审核通过”。创建方法与上述相同。 然后修改“公司领导审批”活动的“完成“路由，将其终点设置为 “财务人员办理”活动，方法同“申请人“活动的”送部门领导审核“路由,并改名为”审批通过“。修改完成后如下图：

![](../../.gitbook/assets/image%20%2812%29.png)

在选择活动中，我们要根据不同的条件来执行不同的路由，需要给选择条件的路由添加配置。先选中指向公司领导审批活动的路由，在属性框中切换到“条件“选项卡，点击编辑框，在编辑框中输入如下内容： return parseFloat\(this.data.expenseList.total.amountCol\)&gt; 5000; 其中parseFloat 是Javascript函数，将后面“\(\)“中的数值转化为数字； this.data是指流程实例中，通过表单收集的业务数据； expenseList是表单中报销明细的数据网格； total是指数据网格合计部分的数据； amountCol是指数据网格中的amountCol列。 其含义为：返回一个布尔型值，数据网格“expenseList“的合计列”amountCol“的值，是否大于5000. 然后将此路由改名为“送公司领导审批“。如下图：

![](../../.gitbook/assets/image%20%2861%29.png)

![](../../.gitbook/assets/image%20%2886%29.png)

同样，我们要修改指向“财务人员办理“的路由，将条件修改为： return parseFloat\(this.data.expenseList.total.amountCol\)&lt;= 5000; 将路由名称修改为“送财务人员办理“。 这样，我们的流程就可以执行了，当然您可以为相关活动添加退回路由，比如：部门领导退回申请人，财务复核退回申请人，公司领导退回申请人。







